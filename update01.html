<script>
  function next() {
         w.location.replace('http://www.google.com/csi');
        }

  function f() {
    w = window.open("javascript:document.write('<div style=\"padding:20px\">Loading Amazon...</div>');setTimeout(function(){location='http://amazon.com'}, 2000)","new","width=500,height=500");
    
    function checkClosed() {
        try {
            if (w.closed) {
                next();
            } else {
                setTimeout(checkClosed, 100);
            }
        } catch(e) {
            next();
        }
    }
    setTimeout(checkClosed, 100);
}
</script>

<a href="#" onclick="f()">Login with amazon</a>